{
  "description": "â‡ª | Hyper key. Escape if pressed alone.",
  "manipulators": [
    <%
     # Define a virtual caps_lock "condition" because "caps_lock" doesn't work correctly
     # as an mandatory modifier key: the modifier will not be removed from the "to" value.
    %>
    {
      "conditions": [
        {
          "bundle_identifiers": [
            "^org\\.gnu\\.Emacs$"
          ],
          "type": "frontmost_application_if"
        }
      ],
      "from": {
        "key_code": "caps_lock",
        "modifiers": {
          "optional": [
            "any"
          ]
        }
      },
      "to": [
        {
          "key_code": "left_shift",
          "modifiers": [
            "left_command",
            "right_command"
          ]
        }
      ],
      "to_if_alone": [
        {
          "key_code": "escape"
        }
      ],
      "type": "basic"
    },
    {
      "from": {
        "key_code": "caps_lock",
        "modifiers": {
          "optional": [
            "any"
          ]
        }
      },
      "to": [
        {
          "key_code": "left_shift",
          "modifiers": [
            "left_command",
            "left_control",
            "left_option"
          ]
        }
      ],
      "to_if_alone": [
        {
          "key_code": "escape"
        }
      ],
      "type": "basic"
    }
  ]
}
